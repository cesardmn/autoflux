import{r as h,j as e}from"./react-BgJcSqp4.js";import{c as I}from"./react-dom-BZX53PpM.js";import{c as A}from"./zustand-BePHtyJ9.js";import{U as z,C as q,F as P,X as T,D as U,G as R}from"./lucide-react-DgVAs111.js";import{d as X,a as C}from"./diff-CHvUVVs_.js";import{m as G}from"./mammoth-DYk0QeYC.js";import"./@xmldom-BSdgGZWi.js";import"./scheduler-SPyfQU6S.js";import"./underscore-D8pyYJcL.js";import"./bluebird-5d01fNRq.js";import"./base64-js-DRz5BQNA.js";import"./jszip-Crv52XZ3.js";import"./xmlbuilder-m9dXxFQd.js";import"./dingbat-to-unicode-CMGDyNm5.js";import"./lop-Cdh-pw7Y.js";import"./option-De8OoYKj.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&m(u)}).observe(document,{childList:!0,subtree:!0});function c(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(n){if(n.ep)return;n.ep=!0;const i=c(n);fetch(n.href,i)}})();const V="/comparadoc/assets/htd-DIJHr3UJ.svg",W=()=>{const[t,r]=h.useState(!1);return e.jsxs("nav",{className:"bg-bk-2 border-b border-bk-3 text-wt-1",role:"navigation","aria-label":"Barra de navegação principal",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsx(J,{}),e.jsx(F,{className:"hidden md:flex gap-6"}),e.jsx(K,{open:t,setOpen:r})]}),e.jsx("div",{className:`md:hidden px-4 pt-0 pb-4 transition-all duration-300 ease-in-out ${t?"opacity-100 max-h-96":"opacity-0 max-h-0 overflow-hidden"}`,children:e.jsx(F,{className:"flex flex-col gap-2"})})]})},J=()=>e.jsx("a",{href:"https://autoflux.app.br/",className:"flex items-center gap-2 hover:text-or-1 transition","aria-label":"Ir para o site do AutoFlux",children:e.jsx("div",{className:"h-10 w-auto overflow-hidden flex items-center justify-center text-bk-1 font-bold text-lg select-none",children:e.jsx("img",{src:V,alt:"Logo do AutoFlux",className:"w-full h-full object-contain"})})}),F=({className:t=""})=>e.jsxs("ul",{className:`text-gr-2 font-medium ${t}`,role:"menu",children:[e.jsx("li",{children:e.jsx("a",{href:"https://www.autoflux.app.br/maladireta",className:"hover:text-or-1 transition-colors duration-150",children:"mala direta"})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.autoflux.app.br/smt",className:"hover:text-or-1 transition-colors duration-150",children:"smt"})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.vfipe.com.br/",className:"hover:text-or-1 transition-colors duration-150",children:"vfipe"})})]}),K=({open:t,setOpen:r})=>e.jsx("button",{onClick:()=>r(!t),className:"md:hidden focus:outline-none focus:ring-2 focus:ring-or-2 transition-transform duration-150","aria-label":t?"Fechar menu":"Abrir menu","aria-expanded":t,children:e.jsx("svg",{className:"w-6 h-6 text-wt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:t?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),H=()=>e.jsx("footer",{className:"bg-bk-2 border-t border-bk-3 text-wt-2 text-sm px-4 py-4",children:e.jsx("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-2 text-center sm:flex-row sm:justify-center",children:e.jsxs("p",{className:"text-xs",children:["© ",new Date().getFullYear()," ",e.jsx("span",{className:"font-semibold",children:"autoflux"}),". Todos os direitos reservados."]})})}),S=A(t=>({docx1:null,setDocx1:r=>t({docx1:r}),docx2:null,setDocx2:r=>t({docx2:r}),matrix:[],setMatrix:r=>t({matrix:r})})),$=({label:t})=>{const[r,c]=h.useState(!1),[m,n]=h.useState(null),[i,u]=h.useState(null),{setDocx1:f,setDocx2:g}=S(),N=[".docx"],b=s=>{s.preventDefault(),c(!0)},j=s=>{s.preventDefault(),c(!1)},y=s=>{s.preventDefault(),c(!1);const a=Array.from(s.dataTransfer.files);a.length>0&&v(a[0])},D=s=>{const a=s.target.files[0];a&&v(a)},v=s=>{const a=s.name.slice(s.name.lastIndexOf(".")).toLowerCase();if(!N.includes(a)){u("Apenas arquivos .docx são suportados"),n(null);return}if(s.size>5*1024*1024){u("O arquivo é muito grande (máx. 5MB)"),n(null);return}n(s),t==="original"?f(s):g(s),u(null)},L=()=>{n(null),t==="original"?f(null):g(null),u(null)},l=s=>{if(s===0)return"0 Bytes";const a=1024,x=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,d)).toFixed(2))+" "+x[d]},o=`file-input-${t.replace(/\s+/g,"-").toLowerCase()}`;return e.jsxs("div",{className:"space-y-2 cursor-pointer ",children:[e.jsx("label",{className:"block text-sm font-medium text-wt-2",children:`Importe o documento ${t}:`}),m?e.jsx("div",{className:"border border-bk-3 rounded-lg p-4 bg-bk-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-or-3/10 rounded-lg text-or-2",children:e.jsx(P,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-wt-1 truncate max-w-[200px]",children:m.name}),e.jsxs("p",{className:"text-xs text-gr-2",children:[l(m.size)," •"," ",new Date(m.lastModified).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:L,className:"p-1 rounded-full hover:bg-bk-3 transition-colors duration-200 text-gr-2 hover:text-wt-1","aria-label":"Remover arquivo",children:e.jsx(T,{className:"h-4 w-4"})})]})}):e.jsxs("div",{className:`
            relative border-2 border-dashed rounded-lg p-8 text-center transition-colors duration-200 hover:border-or-2
            ${r?"border-or-2 bg-bk-3":"border-bk-3 bg-bk-2"}
            ${i?"border-or-3":""}
          `,onDragOver:b,onDragLeave:j,onDrop:y,onClick:()=>document.getElementById(o).click(),children:[e.jsx("input",{id:o,type:"file",accept:N.join(","),onChange:D,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx(z,{className:`h-10 w-10 ${i?"text-or-3":"text-or-2"}`}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm ${i?"text-or-3":"text-wt-2"}`,children:"Arraste e solte o arquivo aqui"}),e.jsx("p",{className:`text-xs ${i?"text-or-3":"text-gr-2"}`,children:"ou clique para selecionar"})]}),e.jsx("p",{className:`text-xs ${i?"text-or-3":"text-gr-1"}`,children:"Apenas .docx (máx. 5MB)"})]}),i&&e.jsxs("div",{className:"mt-4 flex items-center justify-center text-or-3 text-sm",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:i})]})]})]})},Y=["docx"],k=t=>t.name.split(".").pop().toLowerCase(),Q=t=>Y.includes(k(t)),B=t=>t.split(`
`).map(r=>r.trim()).filter(r=>r.length>0),E=async t=>{try{const r=await t.arrayBuffer(),c=await G.extractRawText({arrayBuffer:r});return{text:c.value,type:"docx",fileName:t.name,size:t.size,lastModified:new Date(t.lastModified),messages:c.messages,paragraphs:B(c.value)}}catch(r){throw new Error(`Failed to parse DOCX file: ${r.message}`)}},Z=async t=>{const r=k(t);switch(r){case"docx":return await E(t);default:throw new Error(`Unsupported file type: ${r}`)}},O={parseDocument:Z,parseDocx:E,extractParagraphs:B,isSupported:Q,getFileType:k};function _(){const{docx1:t,docx2:r}=S(),[c,m]=h.useState([]),[n,i]=h.useState(!1),[u,f]=h.useState("side-by-side");h.useEffect(()=>{async function l(){if(!t||!r){m([]);return}i(!0);try{const o=await O.parseDocument(t),s=await O.parseDocument(r),a=o?.text||"",x=s?.text||"",d=X(a,x);m(d)}catch(o){console.error("Erro ao processar documentos:",o),m([])}finally{i(!1)}}l()},[t,r]);const g=()=>{const l=[];let o=0;for(;o<c.length;){const s=c[o];!s.added&&!s.removed?(l.push({oldLine:s.value,newLine:s.value,unchanged:!0}),o++):s.removed&&c[o+1]?.added?(l.push({oldLine:s.value,newLine:c[o+1].value,unchanged:!1}),o+=2):s.removed?(l.push({oldLine:s.value,newLine:"",unchanged:!1}),o++):s.added&&(l.push({oldLine:"",newLine:s.value,unchanged:!1}),o++)}return l},b=(()=>{let l=0,o=0,s=0;c.forEach(d=>{const p=d.value.split(`
`).filter(Boolean).length;d.added?o+=p:d.removed?s+=p:l+=p});const a=l+o+s,x=a===0?100:Math.round(l/a*100);return{unchanged:l,added:o,removed:s,totalChanges:o+s,total:a,similarityPercentage:x}})(),j=(l,o)=>{const s=C(l,o);return{old:s.map((a,x)=>{if(a.added)return null;const d=a.removed?"bg-red-100 text-red-800 line-through px-1 rounded":"text-gray-800";return e.jsx("span",{className:d,children:a.value},`old-${x}`)}),new:s.map((a,x)=>{if(a.removed)return null;const d=a.added?"bg-green-100 text-green-800 px-1 rounded":"text-gray-800";return e.jsx("span",{className:d,children:a.value},`new-${x}`)})}},y=()=>g().map((o,s)=>{const{oldLine:a,newLine:x,unchanged:d}=o,p=d?{old:a,new:x}:j(a,x);return e.jsxs("div",{className:"flex text-sm font-sans border-b border-gray-200 bg-white",children:[e.jsx("div",{className:"w-1/2 border-r border-gray-200 px-4 py-2 whitespace-pre-wrap",children:d?e.jsx("span",{className:"text-gray-800",children:p.old}):e.jsx("span",{children:p.old?.length?p.old:e.jsx("span",{children:" "})})}),e.jsx("div",{className:"w-1/2 px-4 py-2 whitespace-pre-wrap",children:d?e.jsx("span",{className:"text-gray-800",children:p.new}):e.jsx("span",{children:p.new?.length?p.new:e.jsx("span",{children:" "})})})]},s)}),D=()=>g().map((o,s)=>{const{oldLine:a,newLine:x,unchanged:d}=o,p=d?{old:a,new:x}:j(a,x);return e.jsxs("div",{className:"text-sm font-sans whitespace-pre-wrap border-b border-gray-200 px-4 py-auto bg-white",children:[e.jsx("div",{className:"mb-1 min-h-[1rem]",children:p.old?.length?p.old:e.jsx(e.Fragment,{children:" "})}),e.jsx("div",{className:"min-h-[1rem]",children:p.new?.length?p.new:e.jsx(e.Fragment,{children:" "})})]},s)}),v=(l,o)=>C(l,o).map((a,x)=>{const d=a.added?"bg-green-100 text-green-800 underline":a.removed?"bg-red-100 text-red-800 line-through":"text-gray-800";return e.jsx("span",{className:`${d} whitespace-pre-wrap px-1 rounded`,children:a.value},x)}),L=()=>g().map((o,s)=>e.jsx("div",{className:"text-sm font-sans whitespace-pre-wrap py-2 px-4 border-b border-gray-200 bg-white",children:v(o.oldLine,o.newLine)},s));return!t||!r?e.jsx("div",{className:"p-6 text-center text-gray-500 bg-white rounded-lg border border-gray-200",children:"Selecione dois documentos DOCX para comparar"}):n?e.jsx("div",{className:"p-6 text-center text-gray-500 bg-white rounded-lg border border-gray-200",children:"Processando comparação..."}):e.jsxs("div",{className:"w-full rounded-lg overflow-hidden flex flex-col",children:[e.jsx("div",{className:"bg-bk-2 p-6 space-y-6 rounded-lg",children:e.jsxs("section",{"aria-labelledby":"stats-heading",className:"space-y-4",children:[e.jsx("h2",{id:"stats-heading",className:"text-wt-1 font-medium text-lg",children:"Resultados da Comparação"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(w,{value:`${b.similarityPercentage}%`,label:"Similaridade",color:"text-or-2"}),e.jsx(w,{value:b.added,label:"Adições",color:"text-[#6bff8b]"}),e.jsx(w,{value:b.removed,label:"Remoções",color:"text-[#ff6b6b]"}),e.jsx(w,{value:b.totalChanges,label:"Total de Mudanças",color:"text-wt-2"})]})]})}),e.jsx("div",{className:"bg-bk-1 text-gr-3 my-4 px-6 py-4",children:e.jsxs("section",{"aria-labelledby":"diff-view-heading",children:[e.jsx("h3",{id:"diff-view-heading",className:"text-wt-1 font-medium text-lg mb-4",children:"Modo de Visualização"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(M,{active:u==="side-by-side",onClick:()=>f("side-by-side"),icon:"⇄",label:"Lado a lado"}),e.jsx(M,{active:u==="unified",onClick:()=>f("unified"),icon:"⇅",label:"Empilhado"}),e.jsx(M,{active:u==="inline-merged",onClick:()=>f("inline-merged"),icon:e.jsx(U,{size:12}),label:"Unficado"})]})]})}),e.jsxs("div",{className:"bg-et-3 border border-gray-200 shadow-sm select-text text-gr-3",children:[u==="side-by-side"&&e.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:[e.jsx("div",{className:"w-1/2 border-r border-gray-200 px-4 py-2",children:"Documento Original"}),e.jsx("div",{className:"w-1/2 px-4 py-2",children:"Documento Modificado"})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto bg-wt-1 pt-6",children:u==="side-by-side"?y():u==="unified"?D():L()})]})]})}const w=({value:t,label:r,color:c,bgColor:m})=>e.jsx("div",{className:`${m||""} p-3 rounded-lg border border-bk-3 shadow-sm`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-xl font-bold ${c}`,children:t}),e.jsx("div",{className:"text-xs text-gr-2 mt-1",children:r})]})}),M=({active:t,onClick:r,icon:c,label:m})=>e.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-2 text-sm rounded transition-colors border
      ${t?"bg-or-3 text-bk-1 font-semibold border-or-2":"bg-bk-3 text-wt-2 hover:bg-bk-2 border-transparent cursor-pointer"}`,"aria-pressed":t,children:[e.jsx("span",{children:c})," ",e.jsx("span",{children:m})]}),ee=()=>e.jsxs("div",{className:"max-w-6xl mx-auto px-4 pt-8 pb-2 space-y-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-or-3/10 rounded-lg text-or-2",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-wt-1",children:"Comparador de Documentos"}),e.jsx("p",{className:"text-gr-2 mt-1",children:"Compare o conteúdo de dois arquivos DOCX e identifique as diferenças com precisão."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx($,{label:"original",acceptedTypes:[".docx"]}),e.jsx($,{label:"modificado",acceptedTypes:[".docx"]})]}),e.jsx(_,{})]})]}),se=()=>e.jsxs("div",{className:"h-[100svh] bg-bk-1 text-wt-1 font-sans flex flex-col",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-10",children:e.jsx(W,{})}),e.jsx("main",{className:"flex-1 overflow-y-auto mt-[64px] mb-[64px] px-4",children:e.jsx(ee,{})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-10",children:e.jsx(H,{})})]});I.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(se,{})}));
